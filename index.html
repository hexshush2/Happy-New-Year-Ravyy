<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RAVY Adventure</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
body {
  margin:0;
  padding:0;
  font-family: 'Press Start 2P', cursive;
  background:#222;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  overflow:hidden;
}

body::before{
  content:"";
  position:absolute;
  inset:0;
  background-image: linear-gradient(rgba(255,255,255,0.05) 1px,transparent 1px),
                    linear-gradient(90deg,rgba(255,255,255,0.05) 1px,transparent 1px);
  background-size:20px 20px;
  z-index:-1;
}

.sparkle {
  position: absolute;
  width: 6px; height:6px;
  background:#fff;
  border-radius:50%;
  animation: sparkle 1s infinite;
}
@keyframes sparkle{
  0%{opacity:0;transform:scale(0.5);}
  50%{opacity:1;transform:scale(1);}
  100%{opacity:0;transform:scale(0.5);}
}

.bmo-screen{
  width:400px;
  height:550px;
  border-radius:20px;
  padding:20px;
  box-shadow:0 0 20px #0f4c3d;
  color:#fff;
  display:flex;
  flex-direction:column;
  background:url("https://raw.githubusercontent.com/hexshush2/Happy-New-Year-Ravyy/main/bmo-face.jpg") center/cover;
}

.save-file{
  background:rgba(0,0,0,.4);
  padding:12px;
  border-radius:10px;
}

input{
  width:100%;
  margin-top:6px;
  padding:6px;
  font-family:inherit;
}

.enter-btn, .choice{
  margin-top:10px;
  padding:10px;
  font-family:inherit;
  background:#ffd6a5;
  border:none;
  border-radius:10px;
  cursor:pointer;
}

.progress-bar{
  height:10px;
  background:#b2f7ef;
  margin-top:10px;
  border-radius:6px;
  overflow:hidden;
}

.progress{
  height:100%;
  width:0%;
  background:#ffaaa5;
  transition:width 2s;
}

.welcome,.question,.buttons,.loading{
  display:none;
  margin-top:15px;
  text-align:center;
  font-size:10px;
}

.buttons{
  display:none;
  justify-content:space-around;
  margin-top:auto;
}

/* Maze */
.maze-container{
  display:none;
  flex-direction:row;
  align-items:flex-start;
  justify-content:center;
  position:relative;
  width:100%;
  max-width:700px;
}

.maze-wrapper{
  display:flex;
  flex-direction:column;
  align-items:center;
  position:relative;
}

.title{
  color:#fff;
  font-size:16px;
  margin-bottom:10px;
  text-align:center;
}

.maze{
  display:grid;
  grid-template:repeat(16,40px)/repeat(16,40px);
  gap:3px;
  background:#2a9d8f;
  padding:10px;
  border-radius:20px;
  box-shadow:inset 0 6px #155e63,0 12px 20px rgba(0,0,0,.3);
}

.cell{
  border-radius:4px;
  position:relative;
}

.wall{ background:#155e63; }

.char-her, .char-me{
  width:36px; height:36px;
  position:absolute;
  left:2px; top:2px;
  border-radius:4px;
  box-shadow:0 4px 4px rgba(0,0,0,.5);
  background-size:cover;
  background-position:center;
}

.char-her{ background-image:url('her.PNG'); }
.char-me{ background-image:url('me.PNG'); }

.controls{
  position:absolute;
  width:100%;
  display:flex;
  justify-content:center;
  margin-top:10px;
}

.star-controls{
  position:absolute;
  top:50%; left:50%;
  transform:translate(-50%,-50%);
  display:grid;
  grid-template:50px 50px / 50px 50px;
  gap:10px;
}

.star-controls button{
  width:50px;
  height:50px;
  border-radius:50%;
  border:none;
  cursor:pointer;
  font-size:20px;
  font-family:inherit;
  color:#fff;
}

.up{ background:#3498db; grid-column:2; grid-row:1;}
.down{ background:#f1c40f; grid-column:2; grid-row:2;}
.left{ background:#e74c3c; grid-column:1; grid-row:2;}
.right{ background:#2ecc71; grid-column:2; grid-row:2;}

/* Heart & message */
.heart{
  position:absolute;
  width:50px; height:50px;
  background:red;
  clip-path: polygon(50% 0%, 61% 9%, 68% 18%, 75% 27%, 75% 37%, 68% 47%, 50% 60%, 32% 47%, 25% 37%, 25% 27%, 32% 18%, 39% 9%);
  top:50%;
  left:50%;
  transform:translate(-50%,-50%) scale(0);
  z-index:10;
}
.message{
  position:absolute;
  color:#fff;
  font-size:14px;
  top:60%;
  left:50%;
  transform:translateX(-50%);
  opacity:0;
  z-index:10;
}
</style>
</head>
<body>

<!-- Start Screen -->
<div class="bmo-screen" id="startScreen">
  <div class="save-file">
    SAVE FILE 01: FINDING AYA<br><br>
    PLAYER:
    <input id="playerName" placeholder="Enter your name">
    <button class="enter-btn" id="enterBtn">ENTER</button>
    <div class="progress-bar"><div class="progress" id="progress"></div></div>
  </div>

  <div class="welcome" id="welcome">I’VE LONG BEEN WAITING FOR YOU PO HIHI</div>
  <div class="question" id="question">START NOW PO?</div>
  <div class="buttons" id="buttons">
    <button class="choice" id="yesBtn">YES, BABY</button>
    <button class="choice" id="noBtn">NO!</button>
  </div>
  <div class="loading" id="loading">LOADING PO, BABY HIHI...</div>
</div>

<!-- Maze -->
<div class="maze-container" id="mazeContainer">
  <div class="maze-wrapper">
    <div class="title">FINDING AYA</div>
    <div class="maze" id="maze"></div>
  </div>
  <div class="star-controls">
    <button class="up" onclick="move(0,-1)">⬆</button>
    <button class="down" onclick="move(0,1)">⬇</button>
    <button class="left" onclick="move(-1,0)">⬅</button>
    <button class="right" onclick="move(1,0)">➡</button>
  </div>
  <div class="heart" id="heart"></div>
  <div class="message" id="message">YAYYY! HAPPY NEW YEAR BABY KO HIHI</div>
</div>

<audio id="bgMusic" loop>
  <source src="love-like-you.mp3" type="audio/mpeg">
</audio>

<script>
// Beep function
function beep(v,f,d){
  const c=new AudioContext(),o=c.createOscillator(),g=c.createGain();
  o.connect(g); g.connect(c.destination);
  o.type='square'; o.frequency.value=f; g.gain.value=v;
  o.start(); o.stop(c.currentTime+d/1000);
}

// Sparkles
function createSparkle(){
  const s=document.createElement('div');
  s.classList.add('sparkle');
  s.style.left=Math.random()*window.innerWidth+'px';
  s.style.top=Math.random()*window.innerHeight+'px';
  document.body.appendChild(s);
  setTimeout(()=>s.remove(),1000);
}
setInterval(createSparkle, 300);

// Elements
const nameInput = document.getElementById("playerName");
const enterBtn = document.getElementById("enterBtn");
const welcome = document.getElementById("welcome");
const question = document.getElementById("question");
const buttons = document.getElementById("buttons");
const progress = document.getElementById("progress");
const loading = document.getElementById("loading");
const startScreen = document.getElementById("startScreen");
const mazeContainer = document.getElementById("mazeContainer");
const mazeDiv = document.getElementById("maze");
const bgMusic = document.getElementById("bgMusic");
const heart = document.getElementById("heart");
const message = document.getElementById("message");

// Typing beep
nameInput.addEventListener('keydown',()=>beep(.2,600,50));

// Start screen
enterBtn.addEventListener('click',()=>{
  if(!nameInput.value.trim()) return;
  beep(.3,400,100);
  progress.style.width="100%";
  welcome.style.display="block";
  question.style.display="block";
  buttons.style.display="flex";
});

// NO button
document.getElementById("noBtn").addEventListener('mouseenter',()=>{
  beep(.3,800,80);
  const btn=document.getElementById("noBtn");
  btn.style.position='absolute';
  btn.style.left=Math.random()*200+'px';
  btn.style.top=Math.random()*200+'px';
});

// YES button
document.getElementById("yesBtn").addEventListener('click',()=>{
  beep(.3,500,100);
  loading.style.display="block";
  let dots=0;
  const loop=setInterval(()=>{dots=(dots+1)%4; loading.textContent="LOADING SAVE FILE"+'.'.repeat(dots);},400);
  setTimeout(()=>{
    clearInterval(loop);
    startScreen.style.display="none";
    mazeContainer.style.display="flex";
    drawMaze();
    bgMusic.volume=.4;
    bgMusic.play().catch(()=>{});
  },2000);
});

// Maze map 16x16 complex
const map=[
[0,1,0,0,0,1,0,0,1,0,1,0,0,1,0,0],
[0,1,0,1,0,1,0,1,1,0,1,0,1,0,1,0],
[0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0],
[1,1,0,1,1,1,1,0,1,0,1,0,1,1,1,0],
[0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0],
[0,1,1,1,1,0,1,1,1,0,1,0,1,1,1,0],
[0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0],
[1,1,0,0,1,0,1,1,0,1,1,1,0,1,1,0],
[0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],
[0,1,1,1,0,1,1,0,1,1,1,0,1,1,1,0],
[0,0,0,1,0,0,0,1,0,0,0,0,1,0,0,0],
[0,0,0,0,1,1,0,0,0,0,1,0,0,0,1,0],
[0,0,1,0,1,0,0,1,0,1,0,0,1,0,0,0],
[0,1,0,0,0,0,1,0,0,0,1,0,0,1,0,0],
[0,0,0,1,1,0,0,1,0,1,0,0,1,1,0,0],
[1,0,0,0,0,1,0,0,1,0,1,0,0,0,0,0]
];

let her={x:0,y:0};
const me={x:15,y:15};

function drawMaze(){
  mazeDiv.innerHTML="";
  map.forEach((r,y)=>r.forEach((c,x)=>{
    const d=document.createElement('div');
    d.className='cell'+(c?' wall':'');
    if(her.x==x && her.y==y){
      const div=document.createElement('div');
      div.className='char-her';
      d.appendChild(div);
    }
    if(me.x==x && me.y==y){
      const div=document.createElement('div');
      div.className='char-me';
      d.appendChild(div);
    }
    mazeDiv.appendChild(d);
  }));
}

// Move function
function move(dx,dy){
  beep(.25,650,60);
  const nx=her.x+dx, ny=her.y+dy;
  if(map[ny]?.[nx]===0){
    her.x=nx; her.y=ny;
    drawMaze();
    if(nx==me.x && ny==me.y){
      // Show heart & message
      heart.style.transition="transform 0.8s";
      heart.style.transform="translate(-50%,-50%) scale(1.5)";
      message.style.transition="opacity 1s";
      message.style.opacity=1;
      // Fireworks after delay
      setTimeout(()=>fireworksSequence(),1000);
    }
  }
}

document.onkeydown=e=>{
  if(e.key=="ArrowUp") move(0,-1);
  if(e.key=="ArrowDown") move(0,1);
  if(e.key=="ArrowLeft") move(-1,0);
  if(e.key=="ArrowRight") move(1,0);
};

// Simple fireworks animation
function fireworksSequence(){
  const canvas=document.createElement('canvas');
  canvas.width=window.innerWidth;
  canvas.height=window.innerHeight;
  canvas.style.position='absolute';
  canvas.style.top=0;
  canvas.style.left=0;
  canvas.style.zIndex=20;
  document.body.appendChild(canvas);
  const ctx=canvas.getContext('2d');

  const particles=[];
  for(let i=0;i<200;i++){
    particles.push({
      x:window.innerWidth/2,
      y:window.innerHeight/2,
      vx:(Math.random()-0.5)*8,
      vy:(Math.random()-0.5)*8,
      color:`hsl(${Math.random()*360},100%,60%)`,
      life:100
    });
  }

  function animate(){
    ctx.fillStyle='rgba(0,0,0,0.1)';
    ctx.fillRect(0,0,canvas.width,canvas.height);
    particles.forEach(p=>{
      ctx.fillStyle=p.color;
      ctx.beginPath();
      ctx.arc(p.x,p.y,3,0,Math.PI*2);
      ctx.fill();
      p.x+=p.vx;
      p.y+=p.vy;
      p.life--;
    });
    if(particles.some(p=>p.life>0)){
      requestAnimationFrame(animate);
    } else {
      canvas.remove();
    }
  }
  animate();
}
</script>
</body>
</html>
