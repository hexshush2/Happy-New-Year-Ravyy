<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BMO New Year Adventure 2026</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
body {
  margin: 0;
  padding: 0;
  font-family: 'Press Start 2P', cursive;
  background: #222;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  overflow: hidden;
  transition: opacity 0.6s ease;
}

/* Pixel grid background */
body::before {
  content:"";
  position:absolute;
  inset:0;
  background-image:
    linear-gradient(rgba(255,255,255,0.05) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,0.05) 1px, transparent 1px);
  background-size: 20px 20px;
  z-index:-1;
}

/* BMO start screen */
.bmo-screen {
  width: 400px;
  max-width: 90vw;
  height: 600px;
  max-height: 90vh;
  background: url("https://raw.githubusercontent.com/hexshush2/Happy-New-Year-Ravy/main/bmo-face.jpg") center/cover;
  border-radius: 20px;
  padding: 20px;
  box-shadow: 0 0 20px #0f4c3d;
  color: #fff;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

/* Start screen elements */
.save-file {
  background: rgba(0,0,0,0.4);
  padding: 12px;
  border-radius: 10px;
  text-align: left;
  width: 90%;
}
input {
  width: 100%;
  margin-top: 6px;
  padding: 6px;
  font-family: inherit;
}
.enter-btn, .choice {
  margin-top: 10px;
  padding: 10px;
  font-family: inherit;
  background: #ffd6a5;
  border: none;
  border-radius: 10px;
  cursor: pointer;
}
.progress-bar {
  height: 10px;
  background: #b2f7ef;
  margin-top: 10px;
  border-radius: 6px;
  overflow: hidden;
}
.progress {
  height: 100%;
  width: 0%;
  background: #ffaaa5;
  transition: width 2s;
}
.welcome, .question, .buttons, .loading {
  display: none;
  margin-top: 15px;
  text-align: center;
  font-size: 10px;
}

/* Maze styles (hidden initially) */
.maze-container {
  display: none;
  flex-direction: column;
  align-items: center;
}
.maze {
  display: grid;
  grid-template: repeat(7,46px)/repeat(7,46px);
  gap:6px;
  background:#2a9d8f;
  padding:14px;
  border-radius:20px;
  box-shadow: inset 0 6px #155e63,0 12px 20px rgba(0,0,0,.3);
}
.cell {
  background:#b8fff3;
  border-radius:8px;
  position: relative;
}
.wall { background:#155e63; }
.char {
  width:32px;
  height:32px;
  image-rendering: pixelated;
  position:absolute;
  left:7px; top:6px;
  transform:rotateX(8deg);
  filter: drop-shadow(0 6px 4px rgba(0,0,0,.4));
}
.controls {
  margin-top:20px;
  display:grid;
  grid-template:repeat(2,60px)/repeat(3,60px);
  gap:8px;
}
.controls button {
  font-family:inherit;
  background:#ffd6a5;
  border:none;
  border-radius:14px;
}
</style>
</head>
<body>

<!-- Start Screen -->
<div class="bmo-screen" id="startScreen">
  <div class="save-file">
    SAVE FILE 01: NEW YEAR 2026<br><br>
    PLAYER:
    <input id="playerName" placeholder="Enter your name">
    <button class="enter-btn" id="enterBtn">ENTER</button>
    <div class="progress-bar"><div class="progress" id="progress"></div></div>
  </div>

  <div class="welcome" id="welcome">I’VE LONG BEEN WAITING FOR YOU</div>
  <div class="question" id="question">START NOW?</div>

  <div class="buttons" id="buttons">
    <button class="choice" id="yesBtn">YES</button>
    <button class="choice" id="noBtn">NO</button>
  </div>

  <div class="loading" id="loading">LOADING SAVE FILE...</div>
</div>

<!-- Maze -->
<div class="maze-container" id="mazeContainer">
  <audio id="bgMusic" loop>
    <source src="love-like-you.mp3">
  </audio>
  <div class="maze" id="maze"></div>
  <div class="controls">
    <div></div><button onclick="move(0,-1)">⬆</button><div></div>
    <button onclick="move(-1,0)">⬅</button>
    <button onclick="move(1,0)">➡</button>
    <div></div>
    <button onclick="move(0,1)">⬇</button><div></div>
  </div>
</div>

<script>
// ---------- Beep function ----------
function beep(v,f,d){
  const c=new AudioContext(),o=c.createOscillator(),g=c.createGain();
  o.connect(g); g.connect(c.destination);
  o.type="square"; o.frequency.value=f; g.gain.value=v;
  o.start(); o.stop(c.currentTime+d/1000);
}

// ---------- Start Screen Logic ----------
const nameInput = document.getElementById("playerName");
const enterBtn = document.getElementById("enterBtn");
const welcome = document.getElementById("welcome");
const question = document.getElementById("question");
const buttons = document.getElementById("buttons");
const loading = document.getElementById("loading");
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const startScreen = document.getElementById("startScreen");
const mazeContainer = document.getElementById("mazeContainer");

enterBtn.onclick = () => {
  if(!nameInput.value.trim()) return;
  beep(.3,400,100);
  document.getElementById("progress").style.width="100%";
  welcome.style.display="block";
  question.style.display="block";
  buttons.style.display="flex";
};

noBtn.onmouseenter = () => {
  beep(.3,800,80);
  noBtn.style.position="absolute";
  noBtn.style.left=Math.random()*200+"px";
  noBtn.style.top=Math.random()*200+"px";
};

yesBtn.onclick = () => {
  beep(.3,500,100);
  loading.style.display="block";

  let dots=0;
  const loop=setInterval(()=>{
    dots=(dots+1)%4;
    loading.textContent="LOADING SAVE FILE"+".".repeat(dots);
  },400);

  setTimeout(()=>{
    clearInterval(loop);
    startScreen.style.display="none";
    mazeContainer.style.display="flex";
    startMaze();
  },2000);
};

// ---------- Maze Logic ----------
let her = {x:0,y:0};
const me = {x:6,y:6};
const maze = document.getElementById("maze");
const map=[
[0,0,1,0,0,0,0],
[1,0,1,0,1,1,0],
[0,0,0,0,0,1,0],
[0,1,1,1,0,0,0],
[0,0,0,1,0,1,0],
[0,1,0,0,0,0,0],
[0,0,0,1,1,1,0]
];

function draw(){
  maze.innerHTML="";
  map.forEach((r,y)=>r.forEach((c,x)=>{
    const d=document.createElement("div");
    d.className="cell"+(c?" wall":"");
    if(her.x==x && her.y==y){
      d.innerHTML='<img class="char" src="assets/her.png">';
    }
    if(me.x==x && me.y==y){
      d.innerHTML='<img class="char" src="assets/me.png">';
    }
    maze.appendChild(d);
  }));
}

function move(dx,dy){
  beep(.25,650,60);
  const nx = her.x + dx;
  const ny = her.y + dy;
  if(map[ny]?.[nx]===0){
    her.x = nx;
    her.y = ny;
    draw();
    if(nx===me.x && ny===me.y){
      beep(.4,300,200);
      alert(`Congrats ${nameInput.value}! HER found YOU!`);
      // You can add next game logic here
    }
  }
}

function startMaze(){
  const music = document.getElementById("bgMusic");
  music.volume = 0.4;
  music.play().catch(()=>{});
  draw();
}

document.onkeydown = e=>{
  if(e.key=="ArrowUp") move(0,-1);
  if(e.key=="ArrowDown") move(0,1);
  if(e.key=="ArrowLeft") move(-1,0);
  if(e.key=="ArrowRight") move(1,0);
};
</script>

</body>
</html>
